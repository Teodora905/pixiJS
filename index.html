<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.2.4/pixi.min.js"></script>
  
</head>
<body>
  <div id="slot-container">
    <div id="reel"></div>
    <div id="win-frame"></div>
  </div>
  <div id="message"></div>
  <div id="spin-button"></div>
  <style>
    #reel canvas {
      width: 100%;
    }
  </style>

  <script type="module">
    //import * as PIXI from 'https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.2.4/pixi.min.js';
    
    const reel = document.getElementById('reel');
    const message = document.getElementById('message');

    const imageNames = [
      'symbol_jack',
      'symbol_9',
      'symbol_ace',
      'symbol_queen',
      'symbol_king',
      'symbol_axe',
      'symbol_brain',
      'symbol_rifle',
      'symbol_crow',
      'symbol_10',
    ];

    const app = new PIXI.Application({
      width: 800,
      height: 600,
      backgroundColor: 0x1099bb,
    });
    reel.appendChild(app.view);

    console.log('app', app);

    PIXI.Assets.add('spritesheet', './assets/spritesheet/codingTaskAssets.json');

    PIXI.Assets.load('spritesheet').then((spritesheet) => {
      console.log('spritesheet', spritesheet);
      imageNames.forEach((name, index) => {
        const textureName = `${name}.png`; // Add the .png extension
        const sprite = new PIXI.Sprite(spritesheet.textures[textureName]);

        sprite.width = 50;
        sprite.height = 50;
        sprite.x = index * 50; // Example: horizontal spacing
        sprite.y = 100; // Keep them on the same row
        app.stage.addChild(sprite);

      })
      console.log("spritesheet.textures['winframe.png']", spritesheet.textures['winframe.png']);
      const highlight = new PIXI.Sprite(spritesheet.textures['winframe.png']);
      highlight.width = 50; // Adjust to match your sprite size
      highlight.height = 50; 
      highlight.visible = true;
      app.stage.addChild(highlight);
      }).catch((error) => {
        console.error("Failed to load spritesheet:", error);
      });

    
    function test1() {
      document.getElementById('slot-container').appendChild(app.view);
    //const reelContainer = new PIXI.Container();
    //app.stage.addChild(reelContainer);
    const json = PIXI.Assets.load("./assets/spritesheet/codingTaskAssets.json");
    console.log('json',json);
    //const myArr = JSON.parse(json);
    //console.log('myArr', myArr);
   
    json.then((resolvedTexture) =>{
        console.log('resolvedTexture 123', resolvedTexture);
        console.log('resolvedTexture.data.meta.image',resolvedTexture.data.meta.image);
        /*const spritesheet = new PIXI.Spritesheet(
            PIXI.Texture.from(resolvedTexture.data.meta.image),
            resolvedTexture
        );
        spritesheet.parse().then(() => {
          console.log('spritesheet', spritesheet);
        }).catch((error) => {
          console.error('Error parsing spritesheet:', error);
        });*/
        
        resolvedTexture.data.animations = {
          'symbols': ['symbol_9.png', 'symbol_10.png']
        }
      const anim = new PIXI.AnimatedSprite(resolvedTexture.data.animations.symbols);
      console.log('anim', anim);
      console.log('resolvedTexture.textures', resolvedTexture.textures);
      const symbols = resolvedTexture.textures;
      const symbolSprites = [];
      //symbolSprites = symbols.filter((symbol) => symbol.startsWith("symbol_"));
      //console.log('symbolSprites', symbolSprites);
      symbolSprites.push(symbols['symbol_9.png'], symbols['symbol_10.png'], symbols['symbol_ace.png'], symbols['symbol_axe.png'], symbols['symbol_brain.png'], symbols['symbol_crow.png'], symbols['symbol_jack.png'], symbols['symbol_king.png'],symbols['symbol_king.png'], symbols['symbol_rifle.png']);
      console.log('symbolSprites', symbolSprites);
  
    
    });

    }
      
  </script>
</body>
</html>
